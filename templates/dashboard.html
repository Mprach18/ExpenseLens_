{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div id="content" class="grid-container">
    <!-- Card 1 -->
    <div class="card">
        <div class="percentage-change">Percentage Change</div>
        <div class="percentage-value">+110%</div>
    </div>
    
    <!-- Card 2 -->
    <div class="card">Total Spend: $500</div>

    <!-- Card 3 -->
    <div class="card">Top Category: Entertainment</div>

    <!-- Card 4 -->
    <div class="card">
        <div class="chart-placeholder">
            <canvas id="barChart" width="400" height="200"></canvas>
        </div>
    </div>

    <!-- Card 5 -->
    <div class="card">
        <h3>Latest Transactions</h3>
        <table class="transaction-details">
            <thead>
                <tr>
                    <th>Category</th>
                    <th>Country</th>
                    <th>City</th>
                    <th>Amount</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Food</td>
                    <td>USA</td>
                    <td>New York</td>
                    <td>$50</td>
                </tr>
                <tr>
                    <td>Travel</td>
                    <td>UK</td>
                    <td>London</td>
                    <td>$100</td>
                </tr>
                <!-- Add more transaction items as needed -->
            </tbody>
        </table>
    </div>

    <!-- Card 6 -->
    <div class="card">
        <div class="chart-placeholder">
            <canvas id="dummyLineChart" width="150" height="150"></canvas>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    // Dummy data for the bar chart
    const data = [30, 50, 80, 120, 200];

    // Get the canvas element and its context
    const canvas = document.getElementById('barChart');
    const ctx = canvas.getContext('2d');

    // Bar chart settings
    const barWidth = 40;
    const barSpacing = 20;
    const chartHeight = canvas.height - 30;
    const maxDataValue = Math.max(...data);

    // Bar color
    const barColor = '#3498db';

    // Function to draw a bar
    function drawBar(x, height) {
      ctx.fillStyle = barColor;
      ctx.fillRect(x, chartHeight - height, barWidth, height);
    }

    // Function to draw the entire bar chart
    function drawBarChart() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw bars based on the data
      for (let i = 0; i < data.length; i++) {
        const barHeight = (data[i] / maxDataValue) * chartHeight;
        const x = i * (barWidth + barSpacing);
        drawBar(x, barHeight);
      }

      // Draw labels
      ctx.fillStyle = '#000';
      ctx.textAlign = 'center';
      ctx.font = '14px Arial';

      for (let i = 0; i < data.length; i++) {
        const x = i * (barWidth + barSpacing) + barWidth / 2;
        const y = chartHeight + 20;
        ctx.fillText(`Label ${i + 1}`, x, y);
      }
    }

    // Call the function to draw the initial bar chart
    drawBarChart();


    // Dummy data for the line chart
    const lineChartData = {
        labels: ['January', 'February', 'March', 'April', 'May'],
        datasets: [{
            label: 'Dummy Line Chart',
            borderColor: '#e74c3c',
            backgroundColor: 'rgba(231, 76, 60, 0.2)',
            data: [10, 30, 50, 20, 40],
            fill: true,
        }]
    };

    // Get the canvas element and its context for the line chart
    const lineCanvas = document.getElementById('dummyLineChart').getContext('2d');

    // Create the line chart
    new Chart(lineCanvas, {
        type: 'line',
        data: lineChartData,
        options: {
            scales: {
                x: [{
                    display: true,
                    scaleLabel: {
                        display: true,
                        labelString: 'Month'
                    }
                }],
                y: [{
                    display: true,
                    scaleLabel: {
                        display: true,
                        labelString: 'Value'
                    }
                }]
            }
        }
    });
    
  </script>

{% endblock %}
